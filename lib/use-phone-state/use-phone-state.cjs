"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const N=require("iso-3166"),u=require("libphonenumber-js"),h=require("react"),T=require("zod"),l=({invalid:e,required:n}={invalid:"Invalid phone number",required:"Phone number is required"})=>T.string({required_error:n}).refine(o=>{try{return u.isValidPhoneNumber(o)}catch{return!1}},e);function Y(e){const n=u.parsePhoneNumberFromString(e);return n?n.country:""}function m(e,n){const o=new u.AsYouType(n);if(!e)return`+${u.getPhoneCode(n)}`;const s=o.input(e);return s||e}const q=({initialCountry:e="US",initialPhoneNumber:n=""}={})=>{const[o,s]=h.useState(e),f=u.getCountryCallingCode(e),[y,a]=h.useState(()=>m(n,e)),[p,i]=h.useState(()=>l().safeParse(n).success),b=()=>{a(`+${f}`),s(e),i(!1)},g=(t,r)=>new u.AsYouType(r).input(t.startsWith("+")?t:`+${t}`),C=t=>{const r=new u.AsYouType(o);r.input(t);const c=r.getNumber();if(a(t),c&&c.isValid()){i(!0);const d=c.country;d&&d!==o&&s(d)}else i(!1)},P=t=>{try{const r=u.getCountryCallingCode(t);a(`+${r}`),s(t),i(!1)}catch(r){console.error("Error fetching country calling code:",r),a(""),s(t)}},S=t=>{const r=t.trim();if(!r)return b(),"";const c=g(r,o);return C(c),c};return{country:o,countryList:N.iso31661,handleCountryChange:P,handlePhoneNumberChange:S,isValid:p,phoneNumber:y}};exports.formatPhoneNumber=m;exports.getCountryCode=Y;exports.phoneValidationSchema=l;exports.usePhoneState=q;
